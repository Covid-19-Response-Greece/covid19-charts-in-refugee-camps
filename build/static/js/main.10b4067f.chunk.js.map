{"version":3,"sources":["components/Chart/Chart.jsx","components/CampPicker/CampPicker.jsx","api/index.js","App.js","index.js","App.module.css","components/Chart/Chart.module.css","components/CampPicker/CampPicker.module.css"],"names":["Chart","data","selectedCamp","useState","selectedCampData","setselectedCampData","weeklyData","setweeklyData","useEffect","cases","map","camp","name_gr","recorded_events","forEach","event","confirmed_cases","push","case_detection_week","filter","weekly_case","array","length","item","str","split","newStr","moment","format","recorded_events_edited","Object","values","concat","reduce","a","String","Number","sort","b","date1","date2","barChart","options","title","display","text","labels","datasets","label","borderColor","fill","style","marginBottom","lineChart","className","styles","container","Camps","camps","handleCampChange","FormControl","formControl","NativeSelect","defaultValue","onChange","e","target","value","i","key","fetchData","axios","get","App","state","setState","this","container_outer","Typography","color","href","class","src","alt","width","height","CampPicker","Date","getFullYear","id","React","Component","ReactDOM","render","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.10b4067f.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Line, Bar } from \"react-chartjs-2\";\nimport moment from \"moment\";\n\nimport styles from \"./Chart.module.css\";\n\nconst Chart = ({ data, selectedCamp }) => {\n  const [selectedCampData, setselectedCampData] = useState([]);\n  const [weeklyData, setweeklyData] = useState([]);\n\n  useEffect(() => {\n    let cases = [];\n\n    if (selectedCamp) {\n      let selectedData = data.map((camp) => {\n        if (camp.name_gr === selectedCamp) {\n          camp.recorded_events.forEach((event) => {\n            if (event.confirmed_cases) {\n              cases.push({\n                case_detection_week: event.case_detection_week,\n                confirmed_cases: event.confirmed_cases,\n              });\n            }\n          });\n        }\n      });\n      setselectedCampData(cases);\n    } else {\n      let recorded_events = data\n        .map(({ recorded_events }) => {\n          const cases = recorded_events.filter((weekly_case) => {\n            if (\n              !weekly_case.case_detection_week ||\n              !weekly_case.confirmed_cases\n            )\n              return false;\n            return true;\n          });\n          return cases;\n        })\n        .map((array) => {\n          if (array.length > 0) return array;\n        })\n        .filter((array) => {\n          if (array) return true;\n          return false;\n        });\n\n      recorded_events.forEach((event) => {\n        event.forEach((item) => {\n          let case_detection_week = item.case_detection_week;\n          let str = case_detection_week.split(\"-\");\n          const newStr =\n            moment(str[0], \"DD/MM/YYYY\").format(\"DD/MM/YYYY\") +\n            \" - \" +\n            moment(str[1], \"DD/MM/YYYY\").format(\"DD/MM/YYYY\");\n          item.case_detection_week = newStr;\n        });\n      });\n      //remove zero length arrays\n      // const recorded_events_edited = Object.values(recorded_events.reduce((a, b) => { a[b.case_detection_week] = Object.assign(a[b.case_detection_week] || {}, b); return a; }, {}));\n      const recorded_events_edited = Object.values(\n        []\n          .concat(...recorded_events)\n          .reduce((a, { case_detection_week, confirmed_cases }) => {\n            a[case_detection_week] = a[case_detection_week] || {\n              case_detection_week,\n              confirmed_cases: 0,\n            };\n            a[case_detection_week].confirmed_cases = String(\n              Number(a[case_detection_week].confirmed_cases) +\n                Number(confirmed_cases)\n            );\n            return a;\n          }, {})\n      );\n\n      // recorded_events_edited.sort((a, b) => a.case_detection_week.localeCompare(b.case_detection_week));\n\n      recorded_events_edited.sort(function (a, b) {\n        let date1 = a.case_detection_week.split(\"-\")[0];\n        let date2 = b.case_detection_week.split(\"-\")[0];\n        return moment(date1, \"DD/MM/YYYY\") - moment(date2, \"DD/MM/YYYY\");\n      });\n      setweeklyData(recorded_events_edited);\n    }\n  }, [data, selectedCamp]);\n\n  const barChart = selectedCampData[0] ? (\n    <Line\n      options={{\n        title: {\n          display: true,\n          text: `Επιβεβαιωμένα κρούσματα δομής ${selectedCamp}` ,\n        },\n      }}\n      data={{\n        labels: selectedCampData.map(\n          ({ case_detection_week }) => case_detection_week\n        ),\n        datasets: [\n          {\n            data: selectedCampData.map((data) => data.confirmed_cases),\n            label: \"Κρούσματα Covid19\",\n            borderColor: \"rgba(255, 0, 0, 0.5)\",\n            fill: true,\n          },\n        ],\n      }}\n    />\n  ) : (\n    <span style={{ marginBottom: \"35px\" }}>\n      Δεν υπάρχουν καταγεγραμμένα κρούσματα στη δομή {selectedCamp}.\n    </span>\n  );\n\n  const lineChart = weeklyData[0] ? (\n    <Line\n      options={{\n        title: {\n          display: true,\n          text: \"Συνολικά επιβεβαιωμένα κρούσματα δομών\",\n        },\n      }}\n      data={{\n        labels: weeklyData.map(\n          ({ case_detection_week }) => case_detection_week\n        ),\n        datasets: [\n          {\n            data: weeklyData.map((data) => data.confirmed_cases),\n            label: \"Κρούσματα Covid19\",\n            borderColor: \"red\",\n            fill: true,\n          },\n        ],\n      }}\n    />\n  ) : null;\n\n  return (\n    <>\n      <div className={styles.container}>\n        {selectedCamp ? barChart : lineChart}\n      </div>\n      {selectedCamp && selectedCampData[0] ? (\n        <h4>Εβδομαδιαία κατανομή Κρουσμάτων COVID19</h4>\n      ) : null}\n      {!selectedCamp && <h4>Εβδομαδιαία κατανομή Κρουσμάτων COVID19</h4>}\n    </>\n  );\n};\n\nexport default Chart;\n","import React from 'react';\nimport { NativeSelect, FormControl } from '@material-ui/core';\nimport styles from './CampPicker.module.css';\n\nconst Camps = ({ camps, handleCampChange }) => {\n  return (\n    <FormControl className={styles.formControl}>\n      <NativeSelect defaultValue=\"\" onChange={(e) => handleCampChange(e.target.value)}>\n        <option value=\"\">Επιλέξτε Δομή Φιλοξενίας Προσφύγων</option>\n        {camps.map((camp, i) => <option key={i} value={camp}>{camp}</option>)}\n      </NativeSelect>\n    </FormControl>\n  );\n};\n\nexport default Camps;\n","import axios from \"axios\";\n\nconst url = \"https://covid-19-greece.herokuapp.com/refugee-camps\";\n\nexport const fetchData = async () => {\n  try {\n    const { data } = await axios.get(url);\n\n    return data[\"refugee-camps\"];\n  } catch (error) {\n    return error;\n  }\n};","import React from \"react\";\nimport { Chart, CampPicker } from \"./components\";\nimport { Typography } from '@material-ui/core';\nimport { fetchData } from \"./api/\";\nimport styles from \"./App.module.css\";\n\n\nclass App extends React.Component {\n  state = {\n    data: [],\n    selectedCamp: \"\",\n    camps: [],\n  };\n\n  async componentDidMount() {\n    const data = await fetchData();\n    const camps = data.map((camp) => camp.name_gr);\n    \n    this.setState({ data, camps });\n  }\n\n  handleCampChange = async (selectedCamp) => {\n    this.setState({ selectedCamp });\n  };\n\n  render() {\n    const { data, camps, selectedCamp } = this.state;\n\n    return (\n      <div className={styles.container_outer}>\n        <div className={styles.container}>\n\n          <Typography color='textSecondary'>\n          <div>\n  <a href=\"https://camps.covid19response.gr\"><img class=\"alignleft\" src=\"https://devpap.co.uk/wp-content/uploads/2020/07/icon1.png\" alt=\"\" width=\"22\" height=\"22\" /></a><a href=\"https://camps.covid19response.gr\">   Πίσω στην Αρχική</a>\n  </div>\n              </Typography>\n          <h2>Κρούσματα COVID19 ανά δομή φιλοξενίας</h2>\n          <CampPicker camps={camps} handleCampChange={this.handleCampChange} />\n          \n          <Chart\n            selectedCamp={selectedCamp}\n            data={data}\n          />\n        </div>\n        <footer>\n          <p>&copy; { new Date().getFullYear() } <a id='pagelink' href=\"https://www.covid19response.gr/\">Covid-19 Response Greece</a></p>\n        </footer>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container_outer\":\"App_container_outer__2lxIK\",\"container\":\"App_container__1MQN3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Chart_container__1PIOn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"CampPicker_formControl__Y7yMs\"};"],"sourceRoot":""}