{"version":3,"sources":["components/Chart/Chart.jsx","components/CampPicker/CampPicker.jsx","api/index.js","App.js","index.js","components/Chart/Chart.module.css","components/CampPicker/CampPicker.module.css","App.module.css"],"names":["Chart","data","selectedCamp","useState","selectedCampData","setselectedCampData","weeklyData","setweeklyData","useEffect","cases","map","camp","name_gr","recorded_events","forEach","event","confirmed_cases","push","case_detection_week","filter","weekly_case","array","length","item","str","split","newStr","moment","format","recorded_events_edited","Object","values","concat","reduce","a","String","Number","sort","b","date1","date2","barChart","labels","datasets","label","borderColor","fill","lineChart","className","styles","container","Camps","camps","handleCampChange","FormControl","formControl","NativeSelect","defaultValue","onChange","e","target","value","i","key","fetchData","axios","get","App","state","setState","this","Typography","color","href","class","src","alt","width","height","CampPicker","React","Component","ReactDOM","render","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.c3a210f5.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Line, Bar } from \"react-chartjs-2\";\nimport moment from 'moment'\n\nimport styles from \"./Chart.module.css\";\n\nconst Chart = ({ data, selectedCamp }) => {\n  const [selectedCampData, setselectedCampData] = useState([]);\n  const [weeklyData, setweeklyData] = useState([]);\n\n  useEffect(() => {\n    let cases = []\n\n    if (selectedCamp) { \n      let selectedData = data.map((camp) => {\n        if (camp.name_gr === selectedCamp) {\n          camp.recorded_events.forEach((event) => {\n            if (event.confirmed_cases){\n              cases.push({case_detection_week: event.case_detection_week, confirmed_cases: event.confirmed_cases})\n            }\n          });\n        }\n      });\n      setselectedCampData(cases);\n\n    } else {\n      let recorded_events = data\n        .map(({ recorded_events }) => {\n          const cases = recorded_events.filter((weekly_case) => {\n            if (\n              !weekly_case.case_detection_week ||\n              !weekly_case.confirmed_cases\n            )\n              return false;\n            return true;\n          });\n          return cases;\n        })\n        .map((array) => {\n          if (array.length > 0) return array;\n        }).filter(array => {\n          if(array) return true\n          return false\n        })\n\n        recorded_events.forEach(event => {\n          event.forEach(item => {\n            let case_detection_week = item.case_detection_week\n            let str = case_detection_week.split(\"-\")\n            const newStr = moment(str[0],\"DD/MM/YYYY\").format('DD/MM/YYYY') + ' - ' + moment(str[1], \"DD/MM/YYYY\").format('DD/MM/YYYY')\n            item.case_detection_week = newStr\n          })\n        })\n      //remove zero length arrays\n      // const recorded_events_edited = Object.values(recorded_events.reduce((a, b) => { a[b.case_detection_week] = Object.assign(a[b.case_detection_week] || {}, b); return a; }, {}));\n      const recorded_events_edited = Object.values([].concat(...recorded_events).reduce((a, {case_detection_week, confirmed_cases}) => {\n        a[case_detection_week] = (a[case_detection_week] || {case_detection_week, confirmed_cases: 0});\n        a[case_detection_week].confirmed_cases = String(Number(a[case_detection_week].confirmed_cases) + Number(confirmed_cases));\n        return a;\n      }, {}));\n\n      // recorded_events_edited.sort((a, b) => a.case_detection_week.localeCompare(b.case_detection_week));\n\n      recorded_events_edited.sort(function(a,b){\n        let date1 = a.case_detection_week.split(\"-\")[0]\n        let date2 = b.case_detection_week.split(\"-\")[0]\n        return moment(date1, \"DD/MM/YYYY\") - moment(date2, \"DD/MM/YYYY\")\n      });\n      setweeklyData(recorded_events_edited)\n    }\n  }, [data, selectedCamp]);\n\n  const barChart = selectedCampData[0] ? (\n    <Line\n      data={{\n        labels: selectedCampData.map(({ case_detection_week }) => case_detection_week),\n        datasets: [\n          {\n            data: selectedCampData.map((data) => data.confirmed_cases),\n            label: \"Βρέθηκαν με COVID19 ΑΤΟΜΑ\",\n            borderColor: \"rgba(255, 0, 0, 0.5)\",\n            fill: true,\n          },\n        ],\n      }}\n    />\n    ) : null;\n\n  const lineChart = weeklyData[0] ? (\n    <Line\n      data={{\n        labels: weeklyData.map(({ case_detection_week }) => case_detection_week),\n        datasets: [\n          {\n            data: weeklyData.map((data) => data.confirmed_cases),\n            label: \"Κρούσματα Covid19\",\n            borderColor: \"red\",\n            fill: true,\n          },\n        ],\n      }}\n    />\n  ) : null;\n\n  return (\n    <div className={styles.container}>\n      {selectedCamp ? barChart : lineChart}\n    </div>\n  );\n};\n\nexport default Chart;\n","import React from 'react';\nimport { NativeSelect, FormControl } from '@material-ui/core';\nimport styles from './CampPicker.module.css';\n\nconst Camps = ({ camps, handleCampChange }) => {\n  return (\n    <FormControl className={styles.formControl}>\n      <NativeSelect defaultValue=\"\" onChange={(e) => handleCampChange(e.target.value)}>\n        <option value=\"\">Επιλέξτε Δομή Φιλοξενίας Προσφύγων</option>\n        {camps.map((camp, i) => <option key={i} value={camp}>{camp}</option>)}\n      </NativeSelect>\n    </FormControl>\n  );\n};\n\nexport default Camps;\n","import axios from \"axios\";\n\nconst url = \"https://covid-19-greece.herokuapp.com/refugee-camps\";\n\nexport const fetchData = async () => {\n  try {\n    const { data } = await axios.get(url);\n\n    return data[\"refugee-camps\"];\n  } catch (error) {\n    return error;\n  }\n};","import React from \"react\";\nimport { Chart, CampPicker } from \"./components\";\nimport { Typography } from '@material-ui/core';\nimport { fetchData } from \"./api/\";\nimport styles from \"./App.module.css\";\n\n\nclass App extends React.Component {\n  state = {\n    data: [],\n    selectedCamp: \"\",\n    camps: [],\n  };\n\n  async componentDidMount() {\n    const data = await fetchData();\n    const camps = data.map((camp) => camp.name_gr);\n    \n    this.setState({ data, camps });\n  }\n\n  handleCampChange = async (selectedCamp) => {\n    this.setState({ selectedCamp });\n  };\n\n  render() {\n    const { data, camps, selectedCamp } = this.state;\n\n    return (\n      <div className={styles.container}>\n\n         <Typography color='textSecondary'>\n         <div>\n<a href=\"https://camps.covid19response.gr\"><img class=\"alignleft\" src=\"https://devpap.co.uk/wp-content/uploads/2020/07/icon1.png\" alt=\"\" width=\"22\" height=\"22\" /></a><a href=\"https://camps.covid19response.gr\">   Πίσω στην Αρχική</a>\n</div>\n            </Typography>\n        <h2>Κρούσματα COVID19 ανα δομή φιλοξενίας</h2>\n        <CampPicker camps={camps} handleCampChange={this.handleCampChange} />\n        \n        <Chart\n          selectedCamp={selectedCamp}\n          data={data}\n        />\n        <h4>Εβδομαδιαία κατανομή Κρουσμάτων COVID19</h4>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Chart_container__1PIOn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"CampPicker_formControl__Y7yMs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"App_container__1MQN3\"};"],"sourceRoot":""}