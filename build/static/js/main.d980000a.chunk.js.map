{"version":3,"sources":["components/Chart/Chart.jsx","components/CampPicker/CampPicker.jsx","api/index.js","App.js","index.js","components/Chart/Chart.module.css","components/CampPicker/CampPicker.module.css","App.module.css"],"names":["Chart","data","selectedCamp","useState","selectedCampData","setselectedCampData","weeklyData","setweeklyData","useEffect","selectedData","forEach","camp","name_gr","recorded_events","event","console","log","confirmed_cases","map","filter","weekly_case","case_detection_week","array","length","recorded_events_edited","Object","values","concat","reduce","a","String","Number","barChart","undefined","labels","datasets","label","backgroundColor","options","legend","display","title","text","lineChart","borderColor","fill","className","styles","container","Camps","camps","handleCampChange","FormControl","formControl","NativeSelect","defaultValue","onChange","e","target","value","i","key","fetchData","axios","get","App","state","setState","this","Typography","color","href","class","src","alt","width","height","CampPicker","React","Component","ReactDOM","render","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.d980000a.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Line, Bar } from \"react-chartjs-2\";\n\nimport styles from \"./Chart.module.css\";\n\nconst Chart = ({ data, selectedCamp }) => {\n  const [selectedCampData, setselectedCampData] = useState();\n  const [weeklyData, setweeklyData] = useState([]);\n\n  useEffect(() => {\n    let selectedData = 0;\n\n    if (selectedCamp) {\n      data.forEach((camp) => {\n        if (camp.name_gr === selectedCamp) {\n          camp.recorded_events.forEach((event) => {\n            console.log(event.confirmed_cases);\n            if (event.confirmed_cases) selectedData += event.confirmed_cases;\n          });\n        }\n      });\n      setselectedCampData(selectedData);\n    } else {\n      let recorded_events = data\n        .map(({ recorded_events }) => {\n          const cases = recorded_events.filter((weekly_case) => {\n            if (\n              !weekly_case.case_detection_week ||\n              !weekly_case.confirmed_cases\n            )\n              return false;\n            return true;\n          });\n          return cases;\n        })\n        .map((array) => {\n          if (array.length > 0) return array;\n        }).filter(array => {\n          if(array) return true\n          return false\n        })\n      //remove zero length arrays\n      console.log(recorded_events);\n      // const recorded_events_edited = Object.values(recorded_events.reduce((a, b) => { a[b.case_detection_week] = Object.assign(a[b.case_detection_week] || {}, b); return a; }, {}));\n      const recorded_events_edited = Object.values([].concat(...recorded_events).reduce((a, {case_detection_week, confirmed_cases}) => {\n        a[case_detection_week] = (a[case_detection_week] || {case_detection_week, confirmed_cases: 0});\n        a[case_detection_week].confirmed_cases = String(Number(a[case_detection_week].confirmed_cases) + Number(confirmed_cases));\n        return a;\n      }, {}));\n      setweeklyData(recorded_events_edited)\n    }\n  }, [data, selectedCamp]);\n\n  const barChart =\n    selectedCamp && selectedCampData !== undefined ? (\n      <Bar\n        data={{\n          labels: [\"Αποτελέσματα COVID19 tests\"],\n          datasets: [\n            {\n              label: \"Βρέθηκαν με COVID19 ΑΤΟΜΑ\",\n              backgroundColor: [\n                \"rgba(255, 0, 0, 0.5)\",\n              ],\n              data: [selectedCampData],\n            },\n          ],\n        }}\n        options={{\n          legend: { display: false },\n          title: { display: true, text: `Τρέχοντα κρούσματα ${selectedCamp}` },\n        }}\n      />\n    ) : null;\n\n  const lineChart = weeklyData[0] ? (\n    <Line\n      data={{\n        labels: weeklyData.map(({ case_detection_week }) => case_detection_week),\n        datasets: [\n          {\n            data: weeklyData.map((data) => data.confirmed_cases),\n            label: \"Κρούσματα Covid19\",\n            borderColor: \"red\",\n            fill: true,\n          },\n        ],\n      }}\n    />\n  ) : null;\n\n  return (\n    <div className={styles.container}>\n      {selectedCamp ? barChart : lineChart}\n    </div>\n  );\n};\n\nexport default Chart;\n","import React from 'react';\nimport { NativeSelect, FormControl } from '@material-ui/core';\nimport styles from './CampPicker.module.css';\n\nconst Camps = ({ camps, handleCampChange }) => {\n  return (\n    <FormControl className={styles.formControl}>\n      <NativeSelect defaultValue=\"\" onChange={(e) => handleCampChange(e.target.value)}>\n        <option value=\"\">Επιλέξτε Δομή Φιλοξενίας Προσφύγων</option>\n        {camps.map((camp, i) => <option key={i} value={camp}>{camp}</option>)}\n      </NativeSelect>\n    </FormControl>\n  );\n};\n\nexport default Camps;\n","import axios from \"axios\";\n\nconst url = \"https://covid-19-greece.herokuapp.com/refugee-camps\";\n\nexport const fetchData = async () => {\n  try {\n    const { data } = await axios.get(url);\n\n    return data[\"refugee-camps\"];\n  } catch (error) {\n    return error;\n  }\n};","import React from \"react\";\nimport { Chart, CampPicker } from \"./components\";\nimport { Typography } from '@material-ui/core';\nimport { fetchData } from \"./api/\";\nimport styles from \"./App.module.css\";\n\n\nclass App extends React.Component {\n  state = {\n    data: [],\n    selectedCamp: \"\",\n    camps: [],\n  };\n\n  async componentDidMount() {\n    const data = await fetchData();\n    const camps = data.map((camp) => camp.name_gr);\n    \n    this.setState({ data, camps });\n  }\n\n  handleCampChange = async (selectedCamp) => {\n    this.setState({ selectedCamp });\n  };\n\n  render() {\n    const { data, camps, selectedCamp } = this.state;\n\n    return (\n      <div className={styles.container}>\n\n         <Typography color='textSecondary'>\n         <div>\n<a href=\"https://camps.covid19response.gr\"><img class=\"alignleft\" src=\"https://devpap.co.uk/wp-content/uploads/2020/07/icon1.png\" alt=\"\" width=\"22\" height=\"22\" /></a><a href=\"https://camps.covid19response.gr\">   Πίσω στην Αρχική</a>\n</div>\n            </Typography>\n        <h2>Κρούσματα COVID19 ανα δομή φιλοξενίας</h2>\n        <CampPicker camps={camps} handleCampChange={this.handleCampChange} />\n        \n        <Chart\n          selectedCamp={selectedCamp}\n          data={data}\n        />\n        <h4>Εβδομαδιαία κατανομή Κρουσμάτων COVID19</h4>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Chart_container__1PIOn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"CampPicker_formControl__Y7yMs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"App_container__1MQN3\"};"],"sourceRoot":""}